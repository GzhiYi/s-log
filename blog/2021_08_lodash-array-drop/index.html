<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1" name=viewport> <meta content=#333333 name=theme-color> <meta content=Mrn4dXO3Z_939geeswIgr2wIpspT6n7X5cX1Tjp69Ko name=google-site-verification> <base href=/ > <link href=global.css rel=stylesheet> <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=favicon.png rel=icon type=image/png> <link href=atom-one-light.min.css rel=stylesheet> <link href=client/client-87ec37cb.css rel=stylesheet><link href=client/[slug]-2cfb82a0.css rel=stylesheet> <title>lodash数组中drop方法-GzhiYi's blog</title><meta content=lodash中drop、dropRight、dropRightWhile、dropWhile、slice方法的使用以及分析 name=description data-svelte=svelte-2vncnt><meta content=lodash，drop、dropRight、dropRightWhile、dropWhile、slice，数组，源码分析,每天一个lodash函数 name=keywords data-svelte=svelte-2vncnt> <link href=/client/client.e0961b94.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/client-87ec37cb.css rel=preload as=style><link href=/client/[slug].13458e28.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/config.026ad977.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/inject_styles.5607aec6.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/[slug]-2cfb82a0.css rel=preload as=style></head> <body> <div id=sapper> <nav class=svelte-1vrbr95><ul class=svelte-1vrbr95><li class=svelte-1vrbr95><a href=blog aria-current=page class=svelte-1vrbr95 rel=prefetch>文章列表</a></ul></nav> <div style=width:100%;height:56px;background-color:#dee2e8></div> <main class=svelte-1ca6gui style=padding:1rem> <div class="svelte-vusc9 base"><div class="svelte-vusc9 title">lodash数组中drop方法</div> <span class="svelte-vusc9 author">GzhiYi · 2021-08-20</span> <div class=label>lodash</div></div> <div class="svelte-vusc9 content"><h2 id=drop>Drop</h2> <p>创建一个数组，取出数组前n个元素，n的默认值是1。</p> <p>我个人理解为"踢掉"更好。</p> <pre><code class=language-javascript><span class=hljs-module-access><span class=hljs-module><span class=hljs-identifier>_</span>.</span></span>drop(<span class=hljs-literal>[<span class=hljs-number>1</span>, <span class=hljs-number>2</span>, <span class=hljs-number>3</span>]</span>);
<span class=hljs-comment>// => [2, 3]</span>
</code></pre> <h3 id=源码>源码</h3> <p>drop：</p> <pre><code class=language-js>function drop(array, n=1) {
  // 对数组长度进行判断
 <span class=hljs-built_in> const </span>length =<span class=hljs-built_in> array </span>== null ? 0<span class=hljs-keyword> :</span> array.length
  // 如果数组有长度的话，走核心的slice方法
 <span class=hljs-built_in> return </span>length
    ? slice(array, n &lt; 0 ? 0<span class=hljs-keyword> :</span> toInteger(n), length)
   <span class=hljs-keyword> :</span> []
}
</code></pre> <p>slice： 虽然slice是后续的内容，但可以提前了解到。</p> <pre><code class=language-js><span class=hljs-keyword>function</span> <span class=hljs-keyword>slice</span>(<span class=hljs-keyword>array</span>, <span class=hljs-keyword>start</span>, <span class=hljs-keyword>end</span>) {
  // 判断数组长度
  let length = <span class=hljs-keyword>array</span> == <span class=hljs-keyword>null</span> ? <span class=hljs-number>0</span> : <span class=hljs-keyword>array</span>.length
  <span class=hljs-keyword>if</span> (!length) {
    <span class=hljs-keyword>return</span> []
  }
  start = start == <span class=hljs-keyword>null</span> ? <span class=hljs-number>0</span> : <span class=hljs-keyword>start</span>
  // 如果没有定义<span class=hljs-keyword>end</span>参数，则默认为数组的长度
  end = end === undefined ? length : <span class=hljs-keyword>end</span>

  <span class=hljs-keyword>if</span> (<span class=hljs-keyword>start</span> &lt; <span class=hljs-number>0</span>) {
    // 还是对输入参数合法的校准，如果开始的数值为负数而且取正后大于
    // 数组长度，则设置<span class=hljs-keyword>start</span>为<span class=hljs-number>0</span>。

    // 如果不是上述的情况，则会把<span class=hljs-keyword>start</span>设置为length + <span class=hljs-keyword>start</span>
    // 假如数组 [<span class=hljs-number>1</span>, <span class=hljs-number>2</span>, <span class=hljs-number>3</span>, <span class=hljs-number>4</span>, <span class=hljs-number>5</span>]，<span class=hljs-keyword>slice</span>(arr, <span class=hljs-number>-3</span>, <span class=hljs-number>2</span>)的<span class=hljs-keyword>start</span>为<span class=hljs-number>2</span>
    start = -<span class=hljs-keyword>start</span> > length ? <span class=hljs-number>0</span> : (length + <span class=hljs-keyword>start</span>)
  }
  end = <span class=hljs-keyword>end</span> > length ? length : <span class=hljs-keyword>end</span>
  <span class=hljs-keyword>if</span> (<span class=hljs-keyword>end</span> &lt; <span class=hljs-number>0</span>) {
    // 和<span class=hljs-keyword>start</span>处理一致
    <span class=hljs-keyword>end</span> += length
  }
  // 这里处理<span class=hljs-keyword>start</span>和<span class=hljs-keyword>end</span>大小关系
  // 存在位运算
  length = <span class=hljs-keyword>start</span> > <span class=hljs-keyword>end</span> ? <span class=hljs-number>0</span> : ((<span class=hljs-keyword>end</span> - <span class=hljs-keyword>start</span>) >>> <span class=hljs-number>0</span>)
  // start = <span class=hljs-keyword>start</span> >>> <span class=hljs-number>0</span>
  <span class=hljs-keyword>start</span> >>>= <span class=hljs-number>0</span>

  let <span class=hljs-keyword>index</span> = <span class=hljs-number>-1</span>
  const result = <span class=hljs-built_in>new</span> <span class=hljs-keyword>Array</span>(length)
  <span class=hljs-keyword>while</span> (++<span class=hljs-keyword>index</span> &lt; length) {
    result[<span class=hljs-keyword>index</span>] = <span class=hljs-keyword>array</span>[<span class=hljs-keyword>index</span> + <span class=hljs-keyword>start</span>]
  }
  <span class=hljs-keyword>return</span> result
}
</code></pre> <ul> <li>有符号移位>>: 该操作符会将第一个操作数向右移动指定的位数。向右被移出的位被丢弃，拷贝最左侧的位以填充左侧。</li> </ul> <pre><code><span class=hljs-symbol>9 </span>>> <span class=hljs-number>2</span>
<span class=hljs-symbol>11111111111111111111111111110111 </span> // -<span class=hljs-number>9</span> -> <span class=hljs-number>11111111111111111111111111111101</span>   // -<span class=hljs-number>3</span>
</code></pre> <ul> <li>无符号移位>>>: 该操作符会将第一个操作数向右移动指定的位数。向右被移出的位被丢弃，左侧用0填充。因为符号位变成了 0，所以结果总是非负的。</li> </ul> <pre><code><span class=hljs-symbol>9 </span>>>> <span class=hljs-number>2</span>
<span class=hljs-symbol>00000000000000000000000000001001 </span>  // <span class=hljs-number>9</span> ->  <span class=hljs-number>00000000000000000000000000000010</span> // <span class=hljs-number>2</span>
</code></pre> <h3 id=扩展>扩展</h3> <h4 id=droprightarray-n1>dropRight(array, [n=1])</h4> <p>从尾部倒过来切。</p> <h4 id=droprightwhilearray-predicate_identity>dropRightWhile(array, [predicate=_.identity])</h4> <p>创建一个切片数组，去除array中从 predicate 返回假值开始到尾部的部分。</p> <p>xxxxx(xxxxxxxxxxxxx) ^ ^ | | predicate假 结尾</p> <pre><code class=language-js>var users = [
  { <span class=hljs-string>'user'</span>: <span class=hljs-string>'barney'</span>,  <span class=hljs-string>'active'</span>: <span class=hljs-keyword>true</span> },
  { <span class=hljs-string>'user'</span>: <span class=hljs-string>'fred'</span>,    <span class=hljs-string>'active'</span>: <span class=hljs-keyword>false</span> },
  { <span class=hljs-string>'user'</span>: <span class=hljs-string>'pebbles'</span>, <span class=hljs-string>'active'</span>: <span class=hljs-keyword>false</span> }
];
 
 <span class=hljs-regexp>//</span> 切掉users中active为<span class=hljs-keyword>false</span>的对象

_.dropRightWhile(users, function(o) { <span class=hljs-keyword>return</span> !o.active; });
<span class=hljs-regexp>//</span> => objects <span class=hljs-keyword>for</span> [<span class=hljs-string>'barney'</span>]

_.dropRightWhile(users, { <span class=hljs-string>'user'</span>: <span class=hljs-string>'pebbles'</span>, <span class=hljs-string>'active'</span>: <span class=hljs-keyword>false</span> });
<span class=hljs-regexp>//</span> => objects <span class=hljs-keyword>for</span> [<span class=hljs-string>'barney'</span>, <span class=hljs-string>'fred'</span>]
</code></pre> <p>这貌似和filter的感觉一样，但drop返回的是一个新数组且predicate更具有灵活性。</p> <h4 id=dropwhilearray-predicate_identity>dropWhile(array, [predicate=_.identity])</h4> <p>创建一个切片数组，去除array中从起点开始到 predicate 返回假值结束部分。</p> <p>(xxxxxxxxxxx)xxxxxxx ^ | predicate假</p> <p>identity为返回入参自身。</p> <pre><code>dentity = <span class=hljs-function><span class=hljs-keyword>function</span><span class=hljs-params>(value)</span> </span>{ <span class=hljs-keyword>return</span> value; }
</code></pre> <p>predicate传入对象也会在内部变为函数处理，编译后的代码为：</p> <pre><code class=language-js><span class=hljs-keyword>function</span> drop<span class=hljs-constructor>While(<span class=hljs-params>array</span>, <span class=hljs-params>predicate</span>)</span> {
  return (<span class=hljs-built_in>array</span><span class=hljs-operator> && </span><span class=hljs-built_in>array</span>.length)
    ? base<span class=hljs-constructor>While(<span class=hljs-params>array</span>, <span class=hljs-params>getIteratee</span>(<span class=hljs-params>predicate</span>, 3)</span>, <span class=hljs-literal>true</span>)
    : <span class=hljs-literal>[]</span>;
}
</code></pre> </div> <div class="svelte-vusc9 contact"><div style=line-height:20px>如果你对这页内容有疑问，欢迎联系我！</div> <a href="mailto:zhiyi.gong@outlook.com?subject=【重要】lodash数组中drop方法&body=gzhiyi.top/blog/2021_08_lodash-array-drop" target=_blank>邮箱 </a> <br> <a href=https://github.com/gzhiyi target=_blank>github </a> </div> </main></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,{post:{title:"lodash数组中drop方法",description:"lodash中drop、dropRight、dropRightWhile、dropWhile、slice方法的使用以及分析",keywords:"lodash，drop、dropRight、dropRightWhile、dropWhile、slice，数组，源码分析,每天一个lodash函数",labels:["lodash"],date:"2021-08-20",path:"2021\u002F08\u002Flodash-array-drop.md",slug:"2021_08_lodash-array-drop",html:"\u003Ch2 id=\"drop\"\u003EDrop\u003C\u002Fh2\u003E\n\u003Cp\u003E创建一个数组，取出数组前n个元素，n的默认值是1。\u003C\u002Fp\u003E\n\u003Cp\u003E我个人理解为&quot;踢掉&quot;更好。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"hljs-module-access\"\u003E\u003Cspan class=\"hljs-module\"\u003E\u003Cspan class=\"hljs-identifier\"\u003E_\u003C\u002Fspan\u003E.\u003C\u002Fspan\u003E\u003C\u002Fspan\u003Edrop(\u003Cspan class=\"hljs-literal\"\u003E[\u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-number\"\u003E2\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-number\"\u003E3\u003C\u002Fspan\u003E]\u003C\u002Fspan\u003E);\n\u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F =&gt; [2, 3]\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 id=\"源码\"\u003E源码\u003C\u002Fh3\u003E\n\u003Cp\u003Edrop：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-js\"\u003Efunction drop(array, n=1) {\n  \u002F\u002F 对数组长度进行判断\n \u003Cspan class=\"hljs-built_in\"\u003E const \u003C\u002Fspan\u003Elength =\u003Cspan class=\"hljs-built_in\"\u003E array \u003C\u002Fspan\u003E== null ? 0\u003Cspan class=\"hljs-keyword\"\u003E :\u003C\u002Fspan\u003E array.length\n  \u002F\u002F 如果数组有长度的话，走核心的slice方法\n \u003Cspan class=\"hljs-built_in\"\u003E return \u003C\u002Fspan\u003Elength\n    ? slice(array, n &lt; 0 ? 0\u003Cspan class=\"hljs-keyword\"\u003E :\u003C\u002Fspan\u003E toInteger(n), length)\n   \u003Cspan class=\"hljs-keyword\"\u003E :\u003C\u002Fspan\u003E []\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Eslice： 虽然slice是后续的内容，但可以提前了解到。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-js\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Eslice\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-keyword\"\u003Earray\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-keyword\"\u003Estart\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-keyword\"\u003Eend\u003C\u002Fspan\u003E) {\n  \u002F\u002F 判断数组长度\n  let length = \u003Cspan class=\"hljs-keyword\"\u003Earray\u003C\u002Fspan\u003E == \u003Cspan class=\"hljs-keyword\"\u003Enull\u003C\u002Fspan\u003E ? \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E : \u003Cspan class=\"hljs-keyword\"\u003Earray\u003C\u002Fspan\u003E.length\n  \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (!length) {\n    \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E []\n  }\n  start = start == \u003Cspan class=\"hljs-keyword\"\u003Enull\u003C\u002Fspan\u003E ? \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E : \u003Cspan class=\"hljs-keyword\"\u003Estart\u003C\u002Fspan\u003E\n  \u002F\u002F 如果没有定义\u003Cspan class=\"hljs-keyword\"\u003Eend\u003C\u002Fspan\u003E参数，则默认为数组的长度\n  end = end === undefined ? length : \u003Cspan class=\"hljs-keyword\"\u003Eend\u003C\u002Fspan\u003E\n\n  \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (\u003Cspan class=\"hljs-keyword\"\u003Estart\u003C\u002Fspan\u003E &lt; \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E) {\n    \u002F\u002F 还是对输入参数合法的校准，如果开始的数值为负数而且取正后大于\n    \u002F\u002F 数组长度，则设置\u003Cspan class=\"hljs-keyword\"\u003Estart\u003C\u002Fspan\u003E为\u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E。\n\n    \u002F\u002F 如果不是上述的情况，则会把\u003Cspan class=\"hljs-keyword\"\u003Estart\u003C\u002Fspan\u003E设置为length + \u003Cspan class=\"hljs-keyword\"\u003Estart\u003C\u002Fspan\u003E\n    \u002F\u002F 假如数组 [\u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-number\"\u003E2\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-number\"\u003E3\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-number\"\u003E4\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-number\"\u003E5\u003C\u002Fspan\u003E]，\u003Cspan class=\"hljs-keyword\"\u003Eslice\u003C\u002Fspan\u003E(arr, \u003Cspan class=\"hljs-number\"\u003E-3\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-number\"\u003E2\u003C\u002Fspan\u003E)的\u003Cspan class=\"hljs-keyword\"\u003Estart\u003C\u002Fspan\u003E为\u003Cspan class=\"hljs-number\"\u003E2\u003C\u002Fspan\u003E\n    start = -\u003Cspan class=\"hljs-keyword\"\u003Estart\u003C\u002Fspan\u003E &gt; length ? \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E : (length + \u003Cspan class=\"hljs-keyword\"\u003Estart\u003C\u002Fspan\u003E)\n  }\n  end = \u003Cspan class=\"hljs-keyword\"\u003Eend\u003C\u002Fspan\u003E &gt; length ? length : \u003Cspan class=\"hljs-keyword\"\u003Eend\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (\u003Cspan class=\"hljs-keyword\"\u003Eend\u003C\u002Fspan\u003E &lt; \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E) {\n    \u002F\u002F 和\u003Cspan class=\"hljs-keyword\"\u003Estart\u003C\u002Fspan\u003E处理一致\n    \u003Cspan class=\"hljs-keyword\"\u003Eend\u003C\u002Fspan\u003E += length\n  }\n  \u002F\u002F 这里处理\u003Cspan class=\"hljs-keyword\"\u003Estart\u003C\u002Fspan\u003E和\u003Cspan class=\"hljs-keyword\"\u003Eend\u003C\u002Fspan\u003E大小关系\n  \u002F\u002F 存在位运算\n  length = \u003Cspan class=\"hljs-keyword\"\u003Estart\u003C\u002Fspan\u003E &gt; \u003Cspan class=\"hljs-keyword\"\u003Eend\u003C\u002Fspan\u003E ? \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E : ((\u003Cspan class=\"hljs-keyword\"\u003Eend\u003C\u002Fspan\u003E - \u003Cspan class=\"hljs-keyword\"\u003Estart\u003C\u002Fspan\u003E) &gt;&gt;&gt; \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E)\n  \u002F\u002F start = \u003Cspan class=\"hljs-keyword\"\u003Estart\u003C\u002Fspan\u003E &gt;&gt;&gt; \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-keyword\"\u003Estart\u003C\u002Fspan\u003E &gt;&gt;&gt;= \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E\n\n  let \u003Cspan class=\"hljs-keyword\"\u003Eindex\u003C\u002Fspan\u003E = \u003Cspan class=\"hljs-number\"\u003E-1\u003C\u002Fspan\u003E\n  const result = \u003Cspan class=\"hljs-built_in\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003EArray\u003C\u002Fspan\u003E(length)\n  \u003Cspan class=\"hljs-keyword\"\u003Ewhile\u003C\u002Fspan\u003E (++\u003Cspan class=\"hljs-keyword\"\u003Eindex\u003C\u002Fspan\u003E &lt; length) {\n    result[\u003Cspan class=\"hljs-keyword\"\u003Eindex\u003C\u002Fspan\u003E] = \u003Cspan class=\"hljs-keyword\"\u003Earray\u003C\u002Fspan\u003E[\u003Cspan class=\"hljs-keyword\"\u003Eindex\u003C\u002Fspan\u003E + \u003Cspan class=\"hljs-keyword\"\u003Estart\u003C\u002Fspan\u003E]\n  }\n  \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E result\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cul\u003E\n\u003Cli\u003E有符号移位&gt;&gt;: 该操作符会将第一个操作数向右移动指定的位数。向右被移出的位被丢弃，拷贝最左侧的位以填充左侧。\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode\u003E\u003Cspan class=\"hljs-symbol\"\u003E9 \u003C\u002Fspan\u003E&gt;&gt; \u003Cspan class=\"hljs-number\"\u003E2\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-symbol\"\u003E11111111111111111111111111110111 \u003C\u002Fspan\u003E \u002F\u002F -\u003Cspan class=\"hljs-number\"\u003E9\u003C\u002Fspan\u003E -&gt; \u003Cspan class=\"hljs-number\"\u003E11111111111111111111111111111101\u003C\u002Fspan\u003E   \u002F\u002F -\u003Cspan class=\"hljs-number\"\u003E3\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cul\u003E\n\u003Cli\u003E无符号移位&gt;&gt;&gt;: 该操作符会将第一个操作数向右移动指定的位数。向右被移出的位被丢弃，左侧用0填充。因为符号位变成了 0，所以结果总是非负的。\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode\u003E\u003Cspan class=\"hljs-symbol\"\u003E9 \u003C\u002Fspan\u003E&gt;&gt;&gt; \u003Cspan class=\"hljs-number\"\u003E2\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-symbol\"\u003E00000000000000000000000000001001 \u003C\u002Fspan\u003E  \u002F\u002F \u003Cspan class=\"hljs-number\"\u003E9\u003C\u002Fspan\u003E -&gt;  \u003Cspan class=\"hljs-number\"\u003E00000000000000000000000000000010\u003C\u002Fspan\u003E \u002F\u002F \u003Cspan class=\"hljs-number\"\u003E2\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 id=\"扩展\"\u003E扩展\u003C\u002Fh3\u003E\n\u003Ch4 id=\"droprightarray-n1\"\u003EdropRight(array, [n=1])\u003C\u002Fh4\u003E\n\u003Cp\u003E从尾部倒过来切。\u003C\u002Fp\u003E\n\u003Ch4 id=\"droprightwhilearray-predicate_identity\"\u003EdropRightWhile(array, [predicate=_.identity])\u003C\u002Fh4\u003E\n\u003Cp\u003E创建一个切片数组，去除array中从 predicate 返回假值开始到尾部的部分。\u003C\u002Fp\u003E\n\u003Cp\u003Exxxxx(xxxxxxxxxxxxx)\n      ^            ^\n      |            |\n predicate假       结尾\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-js\"\u003Evar users = [\n  { \u003Cspan class=\"hljs-string\"\u003E&#x27;user&#x27;\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E&#x27;barney&#x27;\u003C\u002Fspan\u003E,  \u003Cspan class=\"hljs-string\"\u003E&#x27;active&#x27;\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-keyword\"\u003Etrue\u003C\u002Fspan\u003E },\n  { \u003Cspan class=\"hljs-string\"\u003E&#x27;user&#x27;\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E&#x27;fred&#x27;\u003C\u002Fspan\u003E,    \u003Cspan class=\"hljs-string\"\u003E&#x27;active&#x27;\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-keyword\"\u003Efalse\u003C\u002Fspan\u003E },\n  { \u003Cspan class=\"hljs-string\"\u003E&#x27;user&#x27;\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E&#x27;pebbles&#x27;\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-string\"\u003E&#x27;active&#x27;\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-keyword\"\u003Efalse\u003C\u002Fspan\u003E }\n];\n \n \u003Cspan class=\"hljs-regexp\"\u003E\u002F\u002F\u003C\u002Fspan\u003E 切掉users中active为\u003Cspan class=\"hljs-keyword\"\u003Efalse\u003C\u002Fspan\u003E的对象\n\n_.dropRightWhile(users, function(o) { \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E !o.active; });\n\u003Cspan class=\"hljs-regexp\"\u003E\u002F\u002F\u003C\u002Fspan\u003E =&gt; objects \u003Cspan class=\"hljs-keyword\"\u003Efor\u003C\u002Fspan\u003E [\u003Cspan class=\"hljs-string\"\u003E&#x27;barney&#x27;\u003C\u002Fspan\u003E]\n\n_.dropRightWhile(users, { \u003Cspan class=\"hljs-string\"\u003E&#x27;user&#x27;\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E&#x27;pebbles&#x27;\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-string\"\u003E&#x27;active&#x27;\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-keyword\"\u003Efalse\u003C\u002Fspan\u003E });\n\u003Cspan class=\"hljs-regexp\"\u003E\u002F\u002F\u003C\u002Fspan\u003E =&gt; objects \u003Cspan class=\"hljs-keyword\"\u003Efor\u003C\u002Fspan\u003E [\u003Cspan class=\"hljs-string\"\u003E&#x27;barney&#x27;\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-string\"\u003E&#x27;fred&#x27;\u003C\u002Fspan\u003E]\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E这貌似和filter的感觉一样，但drop返回的是一个新数组且predicate更具有灵活性。\u003C\u002Fp\u003E\n\u003Ch4 id=\"dropwhilearray-predicate_identity\"\u003EdropWhile(array, [predicate=_.identity])\u003C\u002Fh4\u003E\n\u003Cp\u003E创建一个切片数组，去除array中从起点开始到 predicate 返回假值结束部分。\u003C\u002Fp\u003E\n\u003Cp\u003E(xxxxxxxxxxx)xxxxxxx\n           ^\n           |\n       predicate假\u003C\u002Fp\u003E\n\u003Cp\u003Eidentity为返回入参自身。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode\u003Edentity = \u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-params\"\u003E(value)\u003C\u002Fspan\u003E \u003C\u002Fspan\u003E{ \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E value; }\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Epredicate传入对象也会在内部变为函数处理，编译后的代码为：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-js\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E drop\u003Cspan class=\"hljs-constructor\"\u003EWhile(\u003Cspan class=\"hljs-params\"\u003Earray\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-params\"\u003Epredicate\u003C\u002Fspan\u003E)\u003C\u002Fspan\u003E {\n  return (\u003Cspan class=\"hljs-built_in\"\u003Earray\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-operator\"\u003E &amp;&amp; \u003C\u002Fspan\u003E\u003Cspan class=\"hljs-built_in\"\u003Earray\u003C\u002Fspan\u003E.length)\n    ? base\u003Cspan class=\"hljs-constructor\"\u003EWhile(\u003Cspan class=\"hljs-params\"\u003Earray\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-params\"\u003EgetIteratee\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003Epredicate\u003C\u002Fspan\u003E, 3)\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-literal\"\u003Etrue\u003C\u002Fspan\u003E)\n    : \u003Cspan class=\"hljs-literal\"\u003E[]\u003C\u002Fspan\u003E;\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n"}}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');(function(){try{eval("async function x(){}");var main="/client/client.e0961b94.js"}catch(e){main="/client/legacy/client.c8e72cd1.js"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@2.0.4.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());</script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-170295070-1"></script> <script> window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-170295070-1'); </script> 