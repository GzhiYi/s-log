<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=1280" name=viewport> <meta content=#333333 name=theme-color> <meta content=Mrn4dXO3Z_939geeswIgr2wIpspT6n7X5cX1Tjp69Ko name=google-site-verification> <base href=/ > <link href=global.css rel=stylesheet> <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=favicon.png rel=icon type=image/png> <link href=atom-one-light.min.css rel=stylesheet> <link href=client/client-8d9aba14.css rel=stylesheet><link href=client/[slug]-636f444e.css rel=stylesheet> <title>lodash数组中concat方法-GzhiYi's blog</title><meta content="lodash concat, array method" name=description data-svelte=svelte-2vncnt><meta content=lodash,concat,array,arrayPush,copyArray,baseFlatten name=keywords data-svelte=svelte-2vncnt> <link href=/client/client.796a17e3.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/client-8d9aba14.css rel=preload as=style><link href=/client/[slug].9001d1d3.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/config.026ad977.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/inject_styles.5607aec6.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/[slug]-636f444e.css rel=preload as=style></head> <body> <div id=sapper> <nav class=svelte-1dbd5up><ul class=svelte-1dbd5up> <li class=svelte-1dbd5up><a href=blog aria-current=page class=svelte-1dbd5up rel=prefetch>blog</a></ul></nav> <main class=svelte-1y51i2> <div class="svelte-1cnt1lz base"><div class=label>lodash</div> <div class="svelte-1cnt1lz title">lodash数组中concat方法</div> <span class="svelte-1cnt1lz author">GzhiYi · 2021-07-19</span></div> <div class="svelte-1cnt1lz content"><h2 id=concat>Concat</h2> <p>创建一个用任何数组或值拼接的新数组。</p> <h3 id=使用>使用</h3> <pre><code class=language-javascript>var<span class=hljs-built_in> array </span>= [1]
var other = _.concat(array, 2, [3], [[4]])
 
console.log(other)
// => [1, 2, 3, [4]]
 
console.log(array)
// => [1]
</code></pre> <p>返回的是一个全新的数组；调用并不会改变原本的数组。传入的拼接参数可以为数字、一维数组，甚至是二维数组，这有点意思了来看看源代码的实现。</p> <h3 id=源码>源码</h3> <pre><code class=language-javascript>/**
* @static
* @memberOf _
* @since 4.0.0
* @category Array
* @param {Array}<span class=hljs-built_in> array </span>The<span class=hljs-built_in> array </span>to concatenate.
* @param {...*} [values] The values to concatenate.
* @returns {Array} Returns the<span class=hljs-built_in> new </span>concatenated array.
* @example
*
*/
function concat() {
  // 在定义concat时就不需要指定传入的参数有什么，直接读argruments。
  var length = arguments.length; // 传入参数的长度，用于创建包含length - 1长度的args数组
 <span class=hljs-built_in> if </span>(!length) {
   <span class=hljs-built_in> return </span>[];
  }
  var args = Array(length - 1),
     <span class=hljs-built_in> array </span>= arguments[0], // 这里默认了第一个参数就是要拼接的“原数组”
      index = length;
  // 这里使用while(index--)就是直接遍历index + 1次，index从index - 1开始，最后index = 0作为遍历的结束
  // 如果while(--index)则只会遍历index次，index为0不会被执行
  while (index--) {
    args[index - 1] = arguments[index];
  }
 <span class=hljs-built_in> return </span>arrayPush(isArray(array) ? copyArray(array)<span class=hljs-keyword> :</span> [array], baseFlatten(args, 1));
}
</code></pre> <p>由于lodash代码中会存在多处调用（套娃），所以copyArray和baseFlatten在这一页中只作一些使用上的解释，之后也会对代码进行解释理解。</p> <p>其余函数作用：</p> <ol> <li>copyArray(source, array)</li> </ol> <p>将source的值复制为array。结果是source和array在数值上是一样的，只是遍历了source，逐个下标赋值到array中。</p> <ol start=2> <li>baseFlatten(array, depth, predicate, isStrict, result)</li> </ol> <p>将数组array铺平。depth为铺平的深度。该函数有递归，后续再详细了解。</p> <p>其中一个可以学习到的用法：</p> <pre><code class=language-javascript><span class=hljs-keyword>let</span> index = <span class=hljs-number>-1</span>
<span class=hljs-keyword>let</span> <span class=hljs-keyword>end</span> = <span class=hljs-number>6</span>
<span class=hljs-keyword>while</span>(++index &lt; <span class=hljs-keyword>end</span>){}

<span class=hljs-comment>// 这样的遍历等价于</span>

<span class=hljs-keyword>for</span>(<span class=hljs-keyword>let</span> i = <span class=hljs-number>0</span>; i &lt; <span class=hljs-keyword>end</span>; i++) {}
</code></pre> <ol start=3> <li>arrayPush(array, values)</li> </ol> <p>将两个数组合并。 !!这个方法会修改原传入array的数组！！这和数组展开方式进行合并是有一些区别的。</p> <pre><code class=language-javascript><span class=hljs-keyword>let</span> arr = [<span class=hljs-number>1</span>, <span class=hljs-number>2</span>, <span class=hljs-number>3</span>]
<span class=hljs-keyword>let</span> arr2 = [<span class=hljs-string>'a'</span>, <span class=hljs-string>'b'</span>, <span class=hljs-string>'c'</span>]
[<span class=hljs-meta>...arr, ...arr2</span>] <span class=hljs-comment>// 这个结果并不会改变arr和arr2</span>
</code></pre> <h3 id=总结>总结</h3> <p>这个函数可以对数组进行拼接，即便后续的参数包含有数字，字符串或者数组，和一般的数组拼接有一些额外的不同，但开发中感觉用的比较少。</p> </div> <div class="svelte-1cnt1lz contact"><div>如果你对这页内容有疑问，欢迎联系我！</div> <a href="mailto:zhiyi.gong@outlook.com?subject=【重要】lodash数组中concat方法&body=gzhiyi.top/blog/2021_07_lodash-concat" target=_blank>邮箱 </a> <br> <a href=https://github.com/gzhiyi target=_blank>github </a> </div> </main></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,{post:{title:"lodash数组中concat方法",description:"lodash concat, array method",keywords:"lodash,concat,array,arrayPush,copyArray,baseFlatten",labels:["lodash"],date:"2021-07-19",path:"2021\u002F07\u002Flodash-concat.md",slug:"2021_07_lodash-concat",html:"\u003Ch2 id=\"concat\"\u003EConcat\u003C\u002Fh2\u003E\n\u003Cp\u003E创建一个用任何数组或值拼接的新数组。\u003C\u002Fp\u003E\n\u003Ch3 id=\"使用\"\u003E使用\u003C\u002Fh3\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-javascript\"\u003Evar\u003Cspan class=\"hljs-built_in\"\u003E array \u003C\u002Fspan\u003E= [1]\nvar other = _.concat(array, 2, [3], [[4]])\n \nconsole.log(other)\n\u002F\u002F =&gt; [1, 2, 3, [4]]\n \nconsole.log(array)\n\u002F\u002F =&gt; [1]\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E返回的是一个全新的数组；调用并不会改变原本的数组。传入的拼接参数可以为数字、一维数组，甚至是二维数组，这有点意思了来看看源代码的实现。\u003C\u002Fp\u003E\n\u003Ch3 id=\"源码\"\u003E源码\u003C\u002Fh3\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-javascript\"\u003E\u002F**\n* @static\n* @memberOf _\n* @since 4.0.0\n* @category Array\n* @param {Array}\u003Cspan class=\"hljs-built_in\"\u003E array \u003C\u002Fspan\u003EThe\u003Cspan class=\"hljs-built_in\"\u003E array \u003C\u002Fspan\u003Eto concatenate.\n* @param {...*} [values] The values to concatenate.\n* @returns {Array} Returns the\u003Cspan class=\"hljs-built_in\"\u003E new \u003C\u002Fspan\u003Econcatenated array.\n* @example\n*\n*\u002F\nfunction concat() {\n  \u002F\u002F 在定义concat时就不需要指定传入的参数有什么，直接读argruments。\n  var length = arguments.length; \u002F\u002F 传入参数的长度，用于创建包含length - 1长度的args数组\n \u003Cspan class=\"hljs-built_in\"\u003E if \u003C\u002Fspan\u003E(!length) {\n   \u003Cspan class=\"hljs-built_in\"\u003E return \u003C\u002Fspan\u003E[];\n  }\n  var args = Array(length - 1),\n     \u003Cspan class=\"hljs-built_in\"\u003E array \u003C\u002Fspan\u003E= arguments[0], \u002F\u002F 这里默认了第一个参数就是要拼接的“原数组”\n      index = length;\n  \u002F\u002F 这里使用while(index--)就是直接遍历index + 1次，index从index - 1开始，最后index = 0作为遍历的结束\n  \u002F\u002F 如果while(--index)则只会遍历index次，index为0不会被执行\n  while (index--) {\n    args[index - 1] = arguments[index];\n  }\n \u003Cspan class=\"hljs-built_in\"\u003E return \u003C\u002Fspan\u003EarrayPush(isArray(array) ? copyArray(array)\u003Cspan class=\"hljs-keyword\"\u003E :\u003C\u002Fspan\u003E [array], baseFlatten(args, 1));\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E由于lodash代码中会存在多处调用（套娃），所以copyArray和baseFlatten在这一页中只作一些使用上的解释，之后也会对代码进行解释理解。\u003C\u002Fp\u003E\n\u003Cp\u003E其余函数作用：\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003EcopyArray(source, array)\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003E将source的值复制为array。结果是source和array在数值上是一样的，只是遍历了source，逐个下标赋值到array中。\u003C\u002Fp\u003E\n\u003Col start=\"2\"\u003E\n\u003Cli\u003EbaseFlatten(array, depth, predicate, isStrict, result)\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003E将数组array铺平。depth为铺平的深度。该函数有递归，后续再详细了解。\u003C\u002Fp\u003E\n\u003Cp\u003E其中一个可以学习到的用法：\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E index = \u003Cspan class=\"hljs-number\"\u003E-1\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Eend\u003C\u002Fspan\u003E = \u003Cspan class=\"hljs-number\"\u003E6\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-keyword\"\u003Ewhile\u003C\u002Fspan\u003E(++index &lt; \u003Cspan class=\"hljs-keyword\"\u003Eend\u003C\u002Fspan\u003E){}\n\n\u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F 这样的遍历等价于\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"hljs-keyword\"\u003Efor\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E i = \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E; i &lt; \u003Cspan class=\"hljs-keyword\"\u003Eend\u003C\u002Fspan\u003E; i++) {}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Col start=\"3\"\u003E\n\u003Cli\u003EarrayPush(array, values)\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003E将两个数组合并。\n!!这个方法会修改原传入array的数组！！这和数组展开方式进行合并是有一些区别的。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E arr = [\u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-number\"\u003E2\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-number\"\u003E3\u003C\u002Fspan\u003E]\n\u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E arr2 = [\u003Cspan class=\"hljs-string\"\u003E&#x27;a&#x27;\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-string\"\u003E&#x27;b&#x27;\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-string\"\u003E&#x27;c&#x27;\u003C\u002Fspan\u003E]\n[\u003Cspan class=\"hljs-meta\"\u003E...arr, ...arr2\u003C\u002Fspan\u003E] \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F 这个结果并不会改变arr和arr2\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 id=\"总结\"\u003E总结\u003C\u002Fh3\u003E\n\u003Cp\u003E这个函数可以对数组进行拼接，即便后续的参数包含有数字，字符串或者数组，和一般的数组拼接有一些额外的不同，但开发中感觉用的比较少。\u003C\u002Fp\u003E\n"}}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');(function(){try{eval("async function x(){}");var main="/client/client.796a17e3.js"}catch(e){main="/client/legacy/client.c6fed283.js"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@2.0.4.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());</script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-170295070-1"></script> <script> window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-170295070-1'); </script> 