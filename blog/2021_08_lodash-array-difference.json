{"title":"lodash数组中difference方法","description":"lodash中difference、differenceBy、differenceWith方法的使用以及分析","keywords":"lodash，difference，differenceBy，differenceWith，数组，源码分析,每天一个lodash函数","labels":["lodash"],"date":"2021-08-06","path":"2021/08/lodash-array-difference.md","slug":"2021_08_lodash-array-difference","html":"<h2 id=\"difference\">Difference</h2>\n<p>创建一个具有唯一array值的数组，每个值不包含在其他给定的数组中。（注：即创建一个新数组，这个数组中的值，为第一个数字（array 参数）排除了给定数组中的值。）该方法使用SameValueZero做相等比较。结果值的顺序是由第一个数组中的顺序确定。</p>\n<pre><code class=\"language-javascript\"><span class=\"hljs-attribute\">_</span>.difference([<span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">1</span>],<span class=\"hljs-meta\"> [4, 2])\n// [3, 1]</span>\n</code></pre>\n<h3 id=\"理解\">理解</h3>\n<p>对这个用法，可以理解为抽出属于第一个参数而不属于第二个参数的值。</p>\n<p>其中有一个SamealueZero的匹配规则，大致的规则如下：\n例如比较x、y</p>\n<ol>\n<li>如果x与y不同，返回false</li>\n<li>如果x为数值，则</li>\n</ol>\n<ul>\n<li>如果x是NaN，y也是NaN，返回true</li>\n<li>如果x是-0，y是+0，返回true</li>\n</ul>\n<h3 id=\"源码\">源码</h3>\n<pre><code class=\"language-javascript\">var difference = base<span class=\"hljs-constructor\">Rest(<span class=\"hljs-params\">function</span>(<span class=\"hljs-params\">array</span>, <span class=\"hljs-params\">values</span>)</span> {\n  return is<span class=\"hljs-constructor\">ArrayLikeObject(<span class=\"hljs-params\">array</span>)</span>\n    ? base<span class=\"hljs-constructor\">Difference(<span class=\"hljs-params\">array</span>, <span class=\"hljs-params\">baseFlatten</span>(<span class=\"hljs-params\">values</span>, 1, <span class=\"hljs-params\">isArrayLikeObject</span>, <span class=\"hljs-params\">true</span>)</span>)\n    : <span class=\"hljs-literal\">[]</span>;\n});\n</code></pre>\n<p>这函数调用的起飞阿，我分析lodash函数的代码，还得刨到底。</p>\n<h4 id=\"baserest\">baseRest</h4>\n<pre><code class=\"language-javascript\"> <span class=\"hljs-comment\">/**\n * The base implementation of `_.rest` which doesn&#x27;t validate or coerce arguments.\n *\n * <span class=\"hljs-doctag\">@private</span>\n * <span class=\"hljs-doctag\">@param</span> {Function} func The function to apply a rest parameter to.\n * <span class=\"hljs-doctag\">@param</span> {number} [start=func.length-1] The start position of the rest parameter.\n * <span class=\"hljs-doctag\">@returns</span> {Function} Returns the new function.\n */</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">baseRest</span>(<span class=\"hljs-params\">func, start</span>) </span>{\n  <span class=\"hljs-keyword\">return</span> setToString(overRest(func, start, identity), func + <span class=\"hljs-string\">&#x27;&#x27;</span>);\n}\n</code></pre>\n"}