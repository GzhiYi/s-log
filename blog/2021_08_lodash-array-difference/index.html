<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1" name=viewport> <meta content=#333333 name=theme-color> <meta content=Mrn4dXO3Z_939geeswIgr2wIpspT6n7X5cX1Tjp69Ko name=google-site-verification> <base href=/ > <link href=global.css rel=stylesheet> <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=favicon.png rel=icon type=image/png> <link href=atom-one-light.min.css rel=stylesheet> <link href=client/client-87ec37cb.css rel=stylesheet><link href=client/[slug]-2cfb82a0.css rel=stylesheet> <title>lodash数组中difference方法-GzhiYi's blog</title><meta content=lodash中difference、differenceBy、differenceWith方法的使用以及分析 name=description data-svelte=svelte-2vncnt><meta content=lodash，difference，differenceBy，differenceWith，数组，源码分析,每天一个lodash函数 name=keywords data-svelte=svelte-2vncnt> <link href=/client/client.ea05aee9.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/client-87ec37cb.css rel=preload as=style><link href=/client/[slug].f6291aad.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/config.026ad977.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/inject_styles.5607aec6.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/[slug]-2cfb82a0.css rel=preload as=style></head> <body> <div id=sapper> <nav class=svelte-1vrbr95><ul class=svelte-1vrbr95><li class=svelte-1vrbr95><a href=blog aria-current=page class=svelte-1vrbr95 rel=prefetch>文章列表</a></ul></nav> <div style=width:100%;height:56px;background-color:#dee2e8></div> <main class=svelte-1ca6gui style=padding:1rem> <div class="svelte-vusc9 base"><div class="svelte-vusc9 title">lodash数组中difference方法</div> <span class="svelte-vusc9 author">GzhiYi · 2021-08-06</span> <div class=label>lodash</div></div> <div class="svelte-vusc9 content"><h2 id=difference>Difference</h2> <p>创建一个具有唯一array值的数组，每个值不包含在其他给定的数组中。（注：即创建一个新数组，这个数组中的值，为第一个数字（array 参数）排除了给定数组中的值。）该方法使用SameValueZero做相等比较。结果值的顺序是由第一个数组中的顺序确定。</p> <pre><code class=language-javascript><span class=hljs-attribute>_</span>.difference([<span class=hljs-number>3</span>, <span class=hljs-number>2</span>, <span class=hljs-number>1</span>],<span class=hljs-meta> [4, 2])
// [3, 1]</span>
</code></pre> <h3 id=理解>理解</h3> <p>对这个用法，可以理解为抽出属于第一个参数而不属于第二个参数的值。</p> <p>其中有一个SamealueZero的匹配规则，大致的规则如下： 例如比较x、y</p> <ol> <li>如果x与y不同，返回false</li> <li>如果x为数值，则</li> </ol> <ul> <li>如果x是NaN，y也是NaN，返回true</li> <li>如果x是-0，y是+0，返回true</li> </ul> <h3 id=源码>源码</h3> <pre><code class=language-javascript>var difference = base<span class=hljs-constructor>Rest(<span class=hljs-params>function</span>(<span class=hljs-params>array</span>, <span class=hljs-params>values</span>)</span> {
  return is<span class=hljs-constructor>ArrayLikeObject(<span class=hljs-params>array</span>)</span>
    ? base<span class=hljs-constructor>Difference(<span class=hljs-params>array</span>, <span class=hljs-params>baseFlatten</span>(<span class=hljs-params>values</span>, 1, <span class=hljs-params>isArrayLikeObject</span>, <span class=hljs-params>true</span>)</span>)
    : <span class=hljs-literal>[]</span>;
});
</code></pre> <p>这函数调用的起飞阿，我分析lodash函数的代码，还得刨到底。</p> <h4 id=baserest>baseRest</h4> <pre><code class=language-javascript> <span class=hljs-comment>/**
 * The base implementation of `_.rest` which doesn't validate or coerce arguments.
 *
 * <span class=hljs-doctag>@private</span>
 * <span class=hljs-doctag>@param</span> {Function} func The function to apply a rest parameter to.
 * <span class=hljs-doctag>@param</span> {number} [start=func.length-1] The start position of the rest parameter.
 * <span class=hljs-doctag>@returns</span> {Function} Returns the new function.
 */</span>
<span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>baseRest</span>(<span class=hljs-params>func, start</span>) </span>{
  <span class=hljs-keyword>return</span> setToString(overRest(func, start, identity), func + <span class=hljs-string>''</span>);
}
</code></pre> </div> <div class="svelte-vusc9 contact"><div style=line-height:20px>如果你对这页内容有疑问，欢迎联系我！</div> <a href="mailto:zhiyi.gong@outlook.com?subject=【重要】lodash数组中difference方法&body=gzhiyi.top/blog/2021_08_lodash-array-difference" target=_blank>邮箱 </a> <br> <a href=https://github.com/gzhiyi target=_blank>github </a> </div> </main></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,{post:{title:"lodash数组中difference方法",description:"lodash中difference、differenceBy、differenceWith方法的使用以及分析",keywords:"lodash，difference，differenceBy，differenceWith，数组，源码分析,每天一个lodash函数",labels:["lodash"],date:"2021-08-06",path:"2021\u002F08\u002Flodash-array-difference.md",slug:"2021_08_lodash-array-difference",html:"\u003Ch2 id=\"difference\"\u003EDifference\u003C\u002Fh2\u003E\n\u003Cp\u003E创建一个具有唯一array值的数组，每个值不包含在其他给定的数组中。（注：即创建一个新数组，这个数组中的值，为第一个数字（array 参数）排除了给定数组中的值。）该方法使用SameValueZero做相等比较。结果值的顺序是由第一个数组中的顺序确定。\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"hljs-attribute\"\u003E_\u003C\u002Fspan\u003E.difference([\u003Cspan class=\"hljs-number\"\u003E3\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-number\"\u003E2\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E],\u003Cspan class=\"hljs-meta\"\u003E [4, 2])\n\u002F\u002F [3, 1]\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch3 id=\"理解\"\u003E理解\u003C\u002Fh3\u003E\n\u003Cp\u003E对这个用法，可以理解为抽出属于第一个参数而不属于第二个参数的值。\u003C\u002Fp\u003E\n\u003Cp\u003E其中有一个SamealueZero的匹配规则，大致的规则如下：\n例如比较x、y\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E如果x与y不同，返回false\u003C\u002Fli\u003E\n\u003Cli\u003E如果x为数值，则\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cul\u003E\n\u003Cli\u003E如果x是NaN，y也是NaN，返回true\u003C\u002Fli\u003E\n\u003Cli\u003E如果x是-0，y是+0，返回true\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch3 id=\"源码\"\u003E源码\u003C\u002Fh3\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-javascript\"\u003Evar difference = base\u003Cspan class=\"hljs-constructor\"\u003ERest(\u003Cspan class=\"hljs-params\"\u003Efunction\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003Earray\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-params\"\u003Evalues\u003C\u002Fspan\u003E)\u003C\u002Fspan\u003E {\n  return is\u003Cspan class=\"hljs-constructor\"\u003EArrayLikeObject(\u003Cspan class=\"hljs-params\"\u003Earray\u003C\u002Fspan\u003E)\u003C\u002Fspan\u003E\n    ? base\u003Cspan class=\"hljs-constructor\"\u003EDifference(\u003Cspan class=\"hljs-params\"\u003Earray\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-params\"\u003EbaseFlatten\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003Evalues\u003C\u002Fspan\u003E, 1, \u003Cspan class=\"hljs-params\"\u003EisArrayLikeObject\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-params\"\u003Etrue\u003C\u002Fspan\u003E)\u003C\u002Fspan\u003E)\n    : \u003Cspan class=\"hljs-literal\"\u003E[]\u003C\u002Fspan\u003E;\n});\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E这函数调用的起飞阿，我分析lodash函数的代码，还得刨到底。\u003C\u002Fp\u003E\n\u003Ch4 id=\"baserest\"\u003EbaseRest\u003C\u002Fh4\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-javascript\"\u003E \u003Cspan class=\"hljs-comment\"\u003E\u002F**\n * The base implementation of `_.rest` which doesn&#x27;t validate or coerce arguments.\n *\n * \u003Cspan class=\"hljs-doctag\"\u003E@private\u003C\u002Fspan\u003E\n * \u003Cspan class=\"hljs-doctag\"\u003E@param\u003C\u002Fspan\u003E {Function} func The function to apply a rest parameter to.\n * \u003Cspan class=\"hljs-doctag\"\u003E@param\u003C\u002Fspan\u003E {number} [start=func.length-1] The start position of the rest parameter.\n * \u003Cspan class=\"hljs-doctag\"\u003E@returns\u003C\u002Fspan\u003E {Function} Returns the new function.\n *\u002F\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-function\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title\"\u003EbaseRest\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003Efunc, start\u003C\u002Fspan\u003E) \u003C\u002Fspan\u003E{\n  \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E setToString(overRest(func, start, identity), func + \u003Cspan class=\"hljs-string\"\u003E&#x27;&#x27;\u003C\u002Fspan\u003E);\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n"}}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');(function(){try{eval("async function x(){}");var main="/client/client.ea05aee9.js"}catch(e){main="/client/legacy/client.ba8da692.js"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@2.0.4.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());</script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-170295070-1"></script> <script> window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-170295070-1'); </script> 