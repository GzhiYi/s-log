{"title":"观后笔记-你不知道的JavaScript-上-01","description":"你不知道的Javascri上册的一些内容记录，仅仅是记录自己所不是很明确但确实是有启发的内容点","keywords":"你不知道的Javscript，you don't know javascript，笔记，记录，读书感","labels":["前端"],"date":"2021-09-16","path":"2021/09/you_dont_know_js_1_01.md","slug":"2021_09_you_dont_know_js_1_01","html":"<p>记录一些读书的小点，这些是在自己翻阅书本后觉得可能对自己有帮助的情况下所写下来的内容，并不适用于任何人理解和肯定。</p>\n<h3 id=\"自执行函数iife\">自执行函数IIFE</h3>\n<pre><code class=\"language-js\">(<span class=\"hljs-name\">function</span> funName() {})()\n</code></pre>\n<p>具备将变量包裹起来的能力。另外可以当作函数调用并传递参数进去。</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">const</span> name = <span class=\"hljs-string\">&#x27;GzhiYi&#x27;</span>\n(<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">IIFE</span>(<span class=\"hljs-params\"><span class=\"hljs-built_in\">global</span></span>) </span>{\n  <span class=\"hljs-keyword\">const</span> name = <span class=\"hljs-string\">&#x27;Not Me&#x27;</span>\n  <span class=\"hljs-built_in\">console</span>.log(name) <span class=\"hljs-comment\">// Not me</span>\n  <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-built_in\">global</span>.name) <span class=\"hljs-comment\">// GzhiYi</span>\n})\n<span class=\"hljs-built_in\">console</span>.log(name) <span class=\"hljs-comment\">// GzhiYi</span>\n</code></pre>\n<h3 id=\"with和trycatch都可以创建一个块作用域\">with和try/catch都可以创建一个块作用域</h3>\n<p>用with关键词从对象中跟创建出的作用域仅在with声明中而非外部作用域中有效。</p>\n<p>try/catch中的<code>catch</code>分句会创建一个块作用域，其中所声明的变量仅在catch内部有效。</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">try</span> {\n  <span class=\"hljs-comment\">// trigger error!</span>\n} <span class=\"hljs-keyword\">catch</span>(<span class=\"hljs-built_in\">error</span>) {\n  console.<span class=\"hljs-built_in\">log</span>(<span class=\"hljs-built_in\">error</span>) <span class=\"hljs-comment\">// error info</span>\n}\nconsole.<span class=\"hljs-built_in\">log</span>(<span class=\"hljs-built_in\">error</span>) <span class=\"hljs-comment\">// ReferenceError: err not found</span>\n</code></pre>\n<h3 id=\"没定义的变量rhs查询一定错误吗？\">没定义的变量RHS查询一定错误吗？</h3>\n<p>例子：</p>\n<pre><code class=\"language-js\"><span class=\"hljs-regexp\">//</span> <span class=\"hljs-number\">1</span>\na = <span class=\"hljs-number\">2</span>;\nvar a;\nconsole.log(a) <span class=\"hljs-regexp\">//</span> <span class=\"hljs-number\">2</span>\n\n<span class=\"hljs-regexp\">//</span> <span class=\"hljs-number\">2</span>\nconsole.log(b)\nvar b = <span class=\"hljs-number\">2</span>\n<span class=\"hljs-regexp\">//</span> 你可能认为会输出<span class=\"hljs-number\">2</span>或者ReferenceError，实际上输出undefined\n</code></pre>\n<p><strong>包括变量和函数在内的所有生命都会在任何代码被执行前被处理。</strong></p>\n<p>需要理解的是，<code>var b = 2</code>实际上是两个声明：</p>\n<pre><code class=\"language-js\">var b<span class=\"hljs-comment\">;</span>\n<span class=\"hljs-attribute\">b</span> = <span class=\"hljs-number\">2</span><span class=\"hljs-comment\">;</span>\n</code></pre>\n<p>所以，上面的两个代码片段会有以下处理：</p>\n<pre><code class=\"language-js\"><span class=\"hljs-regexp\">//</span> <span class=\"hljs-number\">1</span>\nvar a; <span class=\"hljs-regexp\">//</span> 声明\na = <span class=\"hljs-number\">2</span>; <span class=\"hljs-regexp\">//</span> 代码执行\nconsole.log(a) <span class=\"hljs-regexp\">//</span> 代码执行\n\n<span class=\"hljs-regexp\">//</span> <span class=\"hljs-number\">2</span>\nvar b; <span class=\"hljs-regexp\">//</span> 声明\nconsole.log(b) <span class=\"hljs-regexp\">//</span> 代码执行\nb = <span class=\"hljs-number\">2</span> <span class=\"hljs-regexp\">//</span> 代码执行\n</code></pre>\n<p>解释的前提是必须要知道，声明都是需要在代码被执行前先被处理，这个过程就是<code>变量提升</code>。</p>\n<p>每一个作用域都被进行提升操作。</p>\n<pre><code class=\"language-js\">console<span class=\"hljs-selector-class\">.log</span>(foo) <span class=\"hljs-comment\">// 报错误！！</span>\n<span class=\"hljs-function\"><span class=\"hljs-title\">foo</span><span class=\"hljs-params\">()</span></span>\n<span class=\"hljs-selector-tag\">var</span> foo = function bar() {}\n</code></pre>\n<p>以上片段报错不是ReferenceError，而是TypeError：</p>\n<ol>\n<li><p><code>Uncaught TypeError: foo is not a function</code>\n类型错误，执行了不属于该类型的操作。</p>\n</li>\n<li><p>如果log的是bar，则<code>Uncaught ReferenceError: bar is not defined</code>\n引用错误，在当前作用域中找不到该变量。</p>\n</li>\n</ol>\n<p>相当于被处理为：</p>\n<pre><code class=\"language-js\"><span class=\"hljs-keyword\">var</span> foo;\nfoo()\nfoo = funciton (){\n  <span class=\"hljs-keyword\">var</span> bar = **<span class=\"hljs-literal\">self</span>**\n}\n</code></pre>\n"}